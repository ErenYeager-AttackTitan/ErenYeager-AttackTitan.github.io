I"Ó-<p>Saya berharap disini sudah melakukan instalasi mysql pada server / machine yang digunakan. Jika belum coba lihat dokumentasi <a href="https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-centos-7">berikut</a>  untuk melakukan instalasi mysql pada CentOS. Sebenarnya bisa pada OS apa saja ya teman teman, hanya saja disini saya menggunakan CentOS.</p>

<p>Secara default, cluster database MySQL dilengkapi dengan pengguna (user), doadmin, yang memiliki akses penuh ke setiap database yang akan kita buat. Daripada menggunakan doadmin untuk mengakses database, sebaiknya buat pengguna <em>(user)</em> tambahan yang hanya memiliki hak istimewa <em>(privileges)</em> yang dibutuhkan, mengikuti prinsip hak istimewa <em>(privileges)</em>.</p>

<p>MySQL menetapkan <em>(privileges)</em> berdasarkan nama akun, yang terdiri dari nama pengguna dan nama host dalam format
<code class="language-plaintext highlighter-rouge">'nama_pengguna'@'nama_host'</code>. Kita dapat menentukan host berdasarkan nama <code class="language-plaintext highlighter-rouge">('user_name'@'localhost')</code>, alamat IP <code class="language-plaintext highlighter-rouge">('user_name'@'198.51.100.1')</code>, atau menggunakan karakter <em>wildcard</em> (seperti <code class="language-plaintext highlighter-rouge">%</code>, seperti pada <code class="language-plaintext highlighter-rouge">'user_name'@'%'</code>, yang cocok dengan semua host).</p>

<h3 id="1-membuat-user--dengan-previlages">1. Membuat User  dengan previlages</h3>
<p>Untuk memberikan semua hak istimewa pada database tertentu kepada pengguna, Anda dapat menggunakan perintah berikut:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql &gt; GRANT ALL ON example_database.* TO 'example_user'@'%';
</code></pre></div></div>

<p>saya akan mulai dengan perintah pembuatan user, dimana memasuki mysql pada root dan membuat user dengan perintah <code class="language-plaintext highlighter-rouge">CREATE USER</code> diikuti dengan password dengan perintah <code class="language-plaintext highlighter-rouge">IDENTIFIED BY</code>. Setelah melakukan pembutan user selanjunya adalah memberikan hak istimewa ke pada user tersebut dengan perintah  <code class="language-plaintext highlighter-rouge">GRANT ALL PRIVILEGES ON *.* TO 'fawzi'@'localhost' WITH GRANT OPTION;</code></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
    <span class="o">&gt;</span> CREATE USER <span class="s1">'fawzi'</span>@<span class="s1">'localhost'</span> IDENTIFIED BY <span class="s1">'P@ssw0rd'</span><span class="p">;</span>
    <span class="o">&gt;</span> CREATE USER <span class="s1">'fawzi'</span>@<span class="s1">'%'</span> IDENTIFIED BY <span class="s1">'P@ssw0rd'</span><span class="p">;</span>
    <span class="o">&gt;</span> GRANT ALL PRIVILEGES ON <span class="k">*</span>.<span class="k">*</span> TO <span class="s1">'fawzi'</span>@<span class="s1">'localhost'</span> WITH GRANT OPTION<span class="p">;</span>
    <span class="o">&gt;</span> GRANT ALL PRIVILEGES ON <span class="k">*</span>.<span class="k">*</span> TO <span class="s1">'fawzi'</span>@<span class="s1">'%'</span> WITH GRANT OPTION<span class="p">;</span>
    <span class="o">&gt;</span> flush privileges<span class="p">;</span>
</code></pre></div></div>

<h3 id="2-membuat-databases-dan-table">2. Membuat Databases dan Table</h3>

<p>setelah melakukan pembuata user langkah selanjutnya adalah pembuatan database dan table sebagai data yang akan kita lakukan koneksi untuk proses streaming. Perintah berikut adalah perintah sederhana dari mysql. untuk lebih jelasnya bisa dilihat pada potingan <a href="https://www.mysqltutorial.org/mysql-create-database/">berikut</a></p>

<p>pembuatan databases dan tabel.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> create database fawzi<span class="p">;</span>
<span class="o">&gt;</span> use fawzi<span class="p">;</span>
<span class="o">&gt;</span> CREATE TABLE banklist<span class="o">(</span>
	rollno INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY, 
	bank_name VARCHAR<span class="o">(</span>90<span class="o">)</span> NOT NULL, 
	city VARCHAR<span class="o">(</span>18<span class="o">)</span> NOT NULL, 
	state VARCHAR<span class="o">(</span>2<span class="o">)</span> NOT NULL, 
	cert INTEGER  NOT NULL, 
	acquiring_institution VARCHAR<span class="o">(</span>65<span class="o">)</span> NOT NULL, 
	closing_date VARCHAR<span class="o">(</span>9<span class="o">)</span> NOT NULL, 
	fund INTEGER  NOT NULL<span class="o">)</span><span class="p">;</span>
</code></pre></div></div>
<p>Pada databases tersebut saya menggunakan databases bernama <code class="language-plaintext highlighter-rouge">fawzi</code>, dengan tabel bernama <code class="language-plaintext highlighter-rouge">banklist</code> yang berisikan tipe data seperti gambar dibawah ini</p>

<p><img title="Describe Databases" alt="" src="/img/posts/Juni/11/back-1.png" /></p>

<p>dimana pada Field Rollno  menjadi <em>auto_increment</em> yang memungkinkan untuk datapa melakukan pengisian data manual ketika dimasukkan tanpa inisialisaasi. selanjutnya yang lain hanya data dummy saja dan boleh atau tidak untuk diiisi.</p>

<h3 id="3-download-confluent-hub-jdbc-connector">3. Download Confluent HUB JDBC Connector</h3>
<p>Konektor <em>source</em> dan <em>sink</em> JDBC memungkinkan kita untuk bertukar data antara database relasional dan Kafka. Konektor <em>source</em> JDBC memungkinkan kita untuk mengimpor data dari database relasional apa pun (SQL, MySQL, PostgreSQL, dan lainnya) dengan <a href="https://www.confluent.io/hub/confluentinc/kafka-connect-jdbc">driver JDBC</a> ke topik Kafka. langkah pertama yang kita lakukan adalah menginstallnya dengan perintah berikut.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir </span>connect
<span class="nv">$ </span><span class="nb">cd </span>connect
<span class="nv">$ </span>wget https://d1i4a15mxbxib1.cloudfront.net/api/plugins/confluentinc/kafka-connect-jdbc/versions/10.4.1/confluentinc-kafka-connect-jdbc-10.4.1.zip
<span class="nv">$ </span>unzip confluentinc-kafka-connect-jdbc-10.4.1
</code></pre></div></div>
<p>pertama saya membuat directory conncer untuk mengumpulkan konector menjadi satu dan tidak berantakan hehehe. lalu kita unzip saja ya.</p>

<p>Setelah Mendownload JDBC connector, selanjutnya mendownload mysql connector pada java 8 dengan perintah berikut.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wget https://ftp.jaist.ac.jp/pub/mysql/Downloads/Connector-J/mysql-connector-java-8.0.29.tar.gz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-zvf</span> mysql-connector-java-8.0.29.tar.gz
</code></pre></div></div>
<p>copy mysql-connector-java-8.0.29.jar di <code class="language-plaintext highlighter-rouge">kafka_2.13-3.2.0/connect/confluentinc-kafka-connect-jdbc-10.4.1/lib</code> (ini adalah directory saya)</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cp mysql-connector-java-8.0.29.jar ~/kafka_2.13-3.2.0/connect/confluentinc-kafka-connect-jdbc-10.4.1/lib/
</code></pre></div></div>
<h3 id="4-pembuatan-properties-mysql-connector">4. Pembuatan Properties MySQL connector</h3>

<p>Langkah selanjutnya adalah melakukan pembuatan properties, yang akan dijalnkan oleh kafka. saya menamakannya <code class="language-plaintext highlighter-rouge">source-quickstart-mysql.properties</code> temen temen bisa mengganti sesuai dengan yang diinginkan menggunakan (dot).properties saya meletakkannya di <code class="language-plaintext highlighter-rouge">/kafka_2.13-3.2.0/connect/confluentinc-kafka-connect-jdbc-10.4.1/etc/</code>.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vim source-quickstart-mysql.properties
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>‚Üí name=connect-mysql
‚Üí connector.class=io.confluent.connect.jdbc.JdbcSourceConnector
‚Üí tasks.max=1
‚Üí connection.url=jdbc:mysql://172.18.46.120:3306/fawzi?user=fawzi&amp;password=P@ssw0rd
‚Üí mode=incrementing
‚Üí incrementing.column.name=rollno
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wq:
</code></pre></div></div>
<p>pastikan tidak ada typo, ingat <code class="language-plaintext highlighter-rouge">fawzi</code> sebagai databases dan juga user :) selanjutnya saya memasukkan passowrd <code class="language-plaintext highlighter-rouge">P@ssw0rd</code></p>

<p>penjelasan :</p>

<p><strong>‚Äúname‚Äù</strong>: Menetapkan nama untuk konektor baru Kita.</p>

<p><strong>‚Äúconnector.class‚Äù</strong>: Mengidentifikasi nama plugin konektor. kita menggunakan JDBC dari confluent.</p>

<p><strong>‚Äútasks.max‚Äù</strong> : Jumlah tugas untuk konektor ini, atau bisa disebut juga berapa banyak yang akan terhubung dengan konector ini</p>

<p><strong>‚Äúconnection.url‚Äù</strong> : link ke database dengan user dan password</p>

<p><strong>‚Äútopic.prefix‚Äù</strong> : Masukkan awalan topik. Konektor secara otomatis membuat topik Kafka menggunakan konvensi penamaan: <code class="language-plaintext highlighter-rouge">&lt;topic.prefix&gt;&lt;tableName&gt;</code>. Tabel dibuat dengan properti: topic.creation.default.partitions=1 dan topic.creation.default.replication.factor=3. Jika Anda ingin membuat topik dengan spesifik</p>

<p><strong>‚Äúmode‚Äù</strong> : Mode untuk memperbarui tabel setiap kali tabel disurvei.</p>

<p><strong>‚Äúincreamenting.column.name‚Äù</strong> = Masukkan nama kolom Incrementing untuk mengaktifkan mode incrementing. Mode ini menggunakan dua kolom, kolom stempel waktu yang mendeteksi baris baru dan yang dimodifikasi, dan kolom dengan penambahan ketat yang menyediakan ID unik global untuk pembaruan sehingga setiap baris dapat diberi offset aliran unik.</p>

<p><strong>table.whitelist</strong> : Daftar tabel untuk disertakan dalam penyalinan. Gunakan daftar yang dipisahkan koma untuk menentukan beberapa tabel (misalnya: ‚ÄúPengguna, Alamat, Email‚Äù).</p>

<h3 id="5-pengaturan-connect-standalone-pada-kafka">5. Pengaturan Connect Standalone pada Kafka</h3>
<p>ubah bootstap-server sesuai dengan yang digunakan, ubah schema menjadi false, dan tambahkan plugin path.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vim config/connect-standalone.properties
</code></pre></div></div>

<h3 id="referesi">REFERESI</h3>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-centos-7">https://www.digitalocean.com/community/tutorials/how-to-install-mysql-on-centos-7</a></p>

<p><a href="https://docs.digitalocean.com/products/databases/mysql/how-to/modify-user-privileges/">https://docs.digitalocean.com/products/databases/mysql/how-to/modify-user-privileges/</a></p>

<p><a href="https://www.mysqltutorial.org/mysql-create-database/">https://www.mysqltutorial.org/mysql-create-database/</a></p>

<h3 id="ressource">RESSOURCE</h3>
<p><a href="https://www.confluent.io/hub/confluentinc/kafka-connect-jdbc">Driver JDBC Confluent</a></p>

<p><a href="https://ftp.jaist.ac.jp/pub/mysql/Downloads/Connector-J/mysql-connector-java-8.0.29.tar.gz">MySQL Connector Java</a></p>
:ET